<html>
  <head>
    <link rel="stylesheet" href="css/app.css">
  </head>
  <body>
    <img src="img/backplate.jpg" id="backplate">
    <img src="img/on.jpg" id="switch1"> 
    <img src="img/on.jpg" id="switch2">
    <img src="img/off.jpg" id="switch3">
    <div>Users online: <span id="userCount"></span></div>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script>
      var host = location.origin.replace(/^http/, 'ws')
      var ws = new WebSocket(host);
      ws.onopen = function (event) {
        $('img').on('click', toggleSwitch)
      };

      ws.onmessage = function (event) {
        $('#userCount').html(JSON.parse(event.data))
        console.log(event.data)
      }

      function toggleSwitch() {
        if ($(this).attr('src') == 'img/on.jpg') {
          $(this).attr('src', 'img/off.jpg');
        }
        else {
          $(this).attr('src', 'img/on.jpg');
        }
      };

    </script>
  </body>
</html>
